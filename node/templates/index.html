<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Face Animation</title>
    <link rel="icon" type="image/x-icon" href="/public/assets/favicon.ico" />
    <!-- Core theme CSS (includes Bootstrap)-->

    <link href="/public/css/styles.css" rel="stylesheet" />
    <style>
        #video { display: none;}
    </style>
    <script>
        async function getData() {
            const url = `http://localhost/generate/${document.querySelector("#exampleFormControlTextarea1").value}/${document.querySelector("#stylePerson").value}`;
            try {
                const response = await fetch(url);
                if (!response.ok) {
                throw new Error(`Response status: ${response.status}`);
                }

                const json = await response.json();
                document.querySelector("#openaiRes").innerHTML= json.res
                console.log(json);
                document.querySelector("#loading").style.display= "inherit"
                document.querySelector("#video").style.display= "inherit"

            } catch (error) {
                console.error(error.message);
            }
            }
    </script>
  </head>
  <body id="page-top">
    <!-- Navigation-->
    <nav
      class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top"
      id="mainNav"
    >
      <div class="container px-4">
        <a class="navbar-brand" href="#page-top">Face Animation</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarResponsive"
          aria-controls="navbarResponsive"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <!-- <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" href="#about">About</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#services">Services</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#contact">Contact</a>
            </li>
          </ul> -->
        </div>
      </div>
    </nav>
    <!-- Header-->
    <header class="bg-primary bg-gradient text-white">
      <div class="container px-4 text-center">
        <h1 class="fw-bolder">AI Text Prompt to Video Face Animation</h1>
        <p class="lead">
          What would you like it to say?
        </p>

        <div class="container px-4">
            <div class="row gx-4 justify-content-center">
              <div class="col-lg-8">
    
                <form>
                    
                    <div class="form-group">
                      <label for="exampleFormControlTextarea1"
                        >Say:</label
                      >
                      
                      <textarea
                        class="form-control"
                        id="exampleFormControlTextarea1"
                        rows="3"
                      ></textarea>
                    </div>

                    <div class="form-group">
                        <label for="stylePerson">In the style of:</label>
                        <select class="form-control" id="stylePerson">
                        <option>Chris Hemsworth</option>
                        <option>Kim Kardashian</option>
                        </select>
                    </div>
                  </form>

                <a class="btn btn-lg btn-light mt-5" href="#about" onclick="getData()">Start Generating!</a>
            </div>
            <div class="col-lg-4">
                <img src="/examples/picture.jpg" class="object-fit-contain border rounded" style="width: 100%" alt="your image"/>
                <p>
                <a class="btn btn-lg btn-light mt-5" href="#about" onclick="">Change Photo</a>
                </p>
            </div>
          </div>
      </div>
    </header>
    <!-- About section-->
    <section id="about">
      <div class="container px-4">
        <div class="row gx-4 justify-content-center">
          <div class="col-lg-8">
            <div id="loading">
            <div>
                <h4>Genering your video now..</h4>
                <div class="progress">
                    <div class="progress-bar" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
        </div>
        <div id="video">
            <blockquote class="blockquote text-center">
                <p class="mb-0">Enhanced prompt:</p>
                <br/>
                <footer class="blockquote-footer"><cite title="Source Title" id="openaiRes"></cite></footer>
              </blockquote>
            <video  width="500" autoplay muted>
                <source src="/examples/output/chris.mp4" type="video/mp4" >
                
              Your browser does not support the video tag.
              </video>
              </div>
        </div>
        </div>
      </div>
    </section>

    <!-- Footer-->
    <footer class="py-5 bg-dark">
      <div class="container px-4">
        <p class="m-0 text-center text-white">
          Copyright &copy; Your Website 2023
        </p>
      </div>
    </footer>
    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Core theme JS-->
    <script src="js/scripts.js"></script>
  </body>
</html>
